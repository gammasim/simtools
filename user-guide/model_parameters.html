
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Simulation Model &#8212; simtools</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=c2905333"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user-guide/model_parameters';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://raw.githubusercontent.com/gammasim/simtools/refs/heads/doc-preparation/docs/_static/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'dev';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Databases" href="databases.html" />
    <link rel="prev" title="Auxiliary Files" href="auxiliary_files.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="0.1.dev1+ga0c884e" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>
<aside class="bd-header-announcement" aria-label="Announcement">
  <div class="bd-header-announcement__content">simtools is under rapid development with continuous changes. Please contact the developers before using it.</div>
</aside>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">simtools</p>
  
</a></div>
    
      <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api-reference/index.html">
    API Docs
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../developer-guide/index.html">
    Developer Guide
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/gammasim/simtools" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/gammasimtools/" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="https://badge.fury.io/py/gammasimtools.svg" class="icon-link-image" alt="PyPI"/></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api-reference/index.html">
    API Docs
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../developer-guide/index.html">
    Developer Guide
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/gammasim/simtools" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/gammasimtools/" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="https://badge.fury.io/py/gammasimtools.svg" class="icon-link-image" alt="PyPI"/></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="applications.html">simtools Applications</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-calculate-trigger-rate.html">simtools-calculate-trigger-rate</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-convert-all-model-parameters-from-simtel.html">simtools-convert-all-model-parameters-from-simtel</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-convert-geo-coordinates-of-array-elements.html">simtools-convert-geo-coordinates-of-array-elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-convert-model-parameter-from-simtel.html">simtools-convert-model-parameter-from-simtel</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-db-add-file-to-db.html">simtools-db-add-file-to-db</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-db-add-simulation-model-from-repository-to-db.html">simtools-db-add-simulation-model-from-repository-to-db</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-db-add-value-from-json-to-db.html">simtools-db-add-value-from-json-to-db</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-db-get-array-layouts-from-db.html">simtools-db-get-array-layouts-from-db</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-db-get-file-from-db.html">simtools-db-get-file-from-db</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-db-get-parameter-from-db.html">simtools-db-get-parameter-from-db</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-db-inspect-databases.html">simtools-db-inspect-databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-derive-ctao-array-layouts.html">simtools-derive-ctao-array-layouts</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-derive-mirror-rnda.html">simtools-derive-mirror-rnda</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-derive-photon-electron-spectrum.html">simtools-derive-photon-electron-spectrum</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-derive-psf-parameters.html">simtools-derive-psf-parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-docs-produce-array-element-report.html">simtools-docs-produce-array-element-report</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-docs-produce-calibration-reports.html">simtools-docs-produce-calibration-reports</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-docs-produce-model-parameter-reports.html">simtools-docs-produce-model-parameter-reports</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-docs-produce-simulation-configuration-report.html">simtools-docs-produce-simulation-configuration-report</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-generate-array-config.html">simtools-generate-array-config</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-generate-corsika-histograms.html">simtools-generate-corsika-histograms</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-generate-simtel-event-data.html">simtools-generate-simtel-event-data</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-generate-default-metadata.html">simtools-generate-default-metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-generate-regular-arrays.html">simtools-generate-regular-arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-generate-sim-telarray-histograms.html">simtools-generate-sim-telarray-histograms</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-plot-array-layout.html">simtools-plot-array-layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-plot-tabular-data.html">simtools-plot-tabular-data</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-production-derive-corsika-limits.html">simtools-production-derive-corsika-limits</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-production-generate-grid.html">simtools-production-generate-grid</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-production-generate-simulation-config.html">simtools-production-generate-simulation-config</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-production-derive-statistics.html">simtools-production-derive-statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-print-version.html">simtools-print-version</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-run-application.html">simtools-run-application</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-simulate-light-emission.html">simtools-simulate-light-emission</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-simulate-prod.html">simtools-simulate-prod</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-simulate-prod-htcondor-generator.html">simtools-simulate-prod-htcondor-generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-submit-data-from-external.html">simtools-submit-data-from-external</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-submit-model-parameter-from-external.html">simtools-submit-model-parameter-from-external</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-validate-camera-efficiency.html">simtools-validate-camera-efficiency</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-validate-camera-fov.html">simtools-validate-camera-fov</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-validate-cumulative-psf.html">simtools-validate-cumulative-psf</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-validate-file-using-schema.html">simtools-validate-file-using-schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications/simtools-validate-optics.html">simtools-validate-optics</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="auxiliary_files.html">Auxiliary Files</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Simulation Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="databases.html">Databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="simulation_software.html">Simulation Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="productions.html">Simulation Productions</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker_files.html">Containers (docker files)</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">User Guide</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Simulation Model</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="simulation-model">
<h1>Simulation Model<a class="headerlink" href="#simulation-model" title="Link to this heading">#</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">#</a></h2>
<p>Simulation model parameters describe properties of all relevant elements of the observatory. This includes site,
telescopes, and calibration devices.
The management, definition, derivation, verification, and validation of the simulation model is central to simtools.
For simplicity, the term <em>model parameter</em> refers to values, (multi-dimensional) vectors of values
(e.g., the mirror reflectivity vs wavelength and photon incident angle), functions, and algorithms
(e.g., the telescope trigger algorithm).</p>
<p>Model parameters describe for example:</p>
<ul class="simple">
<li><p>Atmospheric model parameters (profile, transmission)</p></li>
<li><p>Geomagnetic field characteristics</p></li>
<li><p>Optical and mechanical telescope properties</p></li>
<li><p>Detector plane settings</p></li>
<li><p>Trigger configurations</p></li>
<li><p>Camera readout parameters</p></li>
<li><p>Simulation production related software parameters</p></li>
</ul>
<p>The major components of the simulation model are:</p>
<ol class="arabic simple">
<li><p><strong>Model parameter schema files:</strong> The schema files define the model parameters and their properties. Every model parameter is defined in a schema file, see the
<a class="reference external" href="https://github.com/gammasim/simtools/tree/main/simtools/schemas/model_parameters">schema file directory</a>.</p></li>
<li><p><strong>Model parameter repository:</strong> The simulation model is stored in a <a class="reference external" href="https://gitlab.cta-observatory.org/cta-science/simulations/simulation-model/simulation-models">gitlab repository</a>. Review and revision control of the simulation model is done using this repository.</p></li>
<li><p><strong>Model parameter databases:</strong> The simulation model is stored in <a class="reference internal" href="databases.html#databases"><span class="std std-ref">mongoDB databases</span></a>.
The <a class="reference internal" href="../api-reference/db_handler.html#dbhandler"><span class="std std-ref">db_handler module</span></a> provides reading and writing interfaces to the database.
The model parameter database holds all values from the simulation model repository and is updated for each release of the simulation model repository.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The simulation model is a central part of the CTAO Simulation Pipeline. The responsibility for the values and the correctness of the simulation model parameters is with the CTAO Simulation Team.</p>
</div>
</section>
<section id="description-of-model-parameters-through-schemas">
<h2>Description of model parameters through schemas<a class="headerlink" href="#description-of-model-parameters-through-schemas" title="Link to this heading">#</a></h2>
<p>Model parameter data structures are defined in schema files.
To ensure consistency and correctness of the model parameters, these schema files are used to validate the model parameter files with <code class="docutils literal notranslate"><span class="pre">simtools-validate-file-using-schema</span></code>.
Strict versioning of schemas and metaschema is introduced to ensure that the model parameters are always compatible with the schema files.</p>
<p>The model parameters are stored in json-style in the <a class="reference external" href="https://gitlab.cta-observatory.org/cta-science/simulations/simulation-model/simulation-models">model repository</a> and database.
A typical model parameter file looks like:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;schema_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0.1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;model_parameter_schema_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0.1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;parameter&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;num_gains&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;instrument&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LSTN-01&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;site&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;North&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;parameter_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;unique_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;unit&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;int64&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;file&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Two types of schema definitions need to be distinguished:</p>
<ol class="arabic simple">
<li><p><strong>Meta schema:</strong> The meta schema defines the structure of the model parameter file. It is a multi-document YAML file including several schema versions. The meta schema is used to validate the model parameter files. The <code class="docutils literal notranslate"><span class="pre">schema_version</span></code> field is used to identify the correct meta schema.</p></li>
<li><p><strong>Model parameter schema:</strong> The model parameter schema defines the properties of the model parameter. It is a human-readable YAML file that describes the model parameter in detail. The <code class="docutils literal notranslate"><span class="pre">model_parameter_schema_version</span></code> field is used to identify the correct model parameter schema (optional field; default value is <code class="docutils literal notranslate"><span class="pre">0.1.0</span></code>).</p></li>
</ol>
<p>The metaschema <a class="reference external" href="https://github.com/gammasim/simtools/blob/main/src/simtools/schemas/model_parameter.metaschema.yml">model_parameter.metaschema.yml</a> defines the json data structure used for model parameters. This meta schema defines e.g., that <code class="docutils literal notranslate"><span class="pre">parameter</span></code> must be a string or <code class="docutils literal notranslate"><span class="pre">file</span></code> a boolean. No additional properties are allowed.</p>
<p>Model parameter schemas are defined in YAML format and located in the <code class="docutils literal notranslate"><span class="pre">simtools/schemas/model_parameters</span></code> directory. Each schema file specifies fields such as <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">type</span></code>, <code class="docutils literal notranslate"><span class="pre">format</span></code>, <code class="docutils literal notranslate"><span class="pre">units</span></code>, and applicable telescopes.  Schemas also include metadata on default values, validation rules, data sources, and links to relevant simulation software.  Model parameter descriptions are primarily derived from the <a class="reference external" href="https://www.mpi-hd.mpg.de/hfm/~bernlohr/sim_telarray/">sim_telarray manual</a>, ensuring alignment with its definitions and conventions.</p>
<p>For above example the schema file <a class="reference external" href="https://github.com/gammasim/simtools/blob/main/src/simtools/schemas/model_parameters/num_gains.schema.yml">num_gains.schema.yml</a> is:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">%YAML</span><span class="w"> </span><span class="m">1.2</span>
<span class="nn">---</span>
<span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Schema for num_gains model parameter</span>
<span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1.0</span>
<span class="nt">meta_schema</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">simpipe-schema</span>
<span class="nt">meta_schema_url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://raw.githubusercontent.com/gammasim/simtools/main/simtools/schemas/model_parameter_and_data_schema.metaschema.yml</span>
<span class="nt">meta_schema_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1.0</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">num_gains</span>
<span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Number of different gains the input signal gets digitized.</span>
<span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">int</span>
<span class="w">    </span><span class="nt">unit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dimensionless</span>
<span class="w">    </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">allowed_range</span><span class="p">:</span>
<span class="w">      </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">      </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="nt">instrument</span><span class="p">:</span>
<span class="w">  </span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Camera</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LSTN</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LSTS</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MSTN</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MSTS</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SSTS</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SCTS</span>
<span class="nt">activity</span><span class="p">:</span>
<span class="w">  </span><span class="nt">setting</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SetParameterFromExternal</span>
<span class="w">  </span><span class="nt">validation</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ValidateParameterByExpert</span>
<span class="nt">source</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Initial instrument setup</span>
<span class="nt">simulation_software</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sim_telarray</span>
</pre></div>
</div>
<p>Model parameter schema files follow the fixed meta schema (see <code class="docutils literal notranslate"><span class="pre">meta_schema</span></code>, <code class="docutils literal notranslate"><span class="pre">meta_schema_url</span></code>, and <code class="docutils literal notranslate"><span class="pre">meta_schema_version</span></code> fields in above example and <a class="reference external" href="https://github.com/gammasim/simtools/blob/main/simtools/schemas/model_parameter_and_data_schema.metaschema.yml">model_parameter_and_data_schema.metaschema.yml</a>).</p>
<section id="valid-keys">
<h3>Valid Keys<a class="headerlink" href="#valid-keys" title="Link to this heading">#</a></h3>
<p>Valid keys are described in detail in <a class="reference external" href="https://github.com/gammasim/simtools/blob/main/simtools/schemas/model_parameter_and_data_schema.metaschema.yml">model_parameter_and_data_schema.metaschema.yml</a>. The most important parameters are:</p>
<section id="header-section">
<h4>Header section<a class="headerlink" href="#header-section" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">title</span></code>: Title of the schema file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">version</span></code>: Version of this schema file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">meta_schema</span></code>: Name of the base schema.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">meta_schema_url</span></code>: URL of the base schema.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">meta_schema_version</span></code>: Version of the base schema.</p></li>
</ul>
</section>
<section id="parameter-description">
<h4>Parameter description<a class="headerlink" href="#parameter-description" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: Name of the parameter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">description</span></code>: Description of the parameter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">short_description</span></code>: Short description of the parameter (optional).</p></li>
</ul>
</section>
<section id="parameter-data">
<h4>Parameter data<a class="headerlink" href="#parameter-data" title="Link to this heading">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">data</span></code> field is used to describe the actual type, format, and allowed values of the parameter.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code>: Data type of the parameter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unit</span></code>: Units of the parameter (compatible with astropy units).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">default</span></code>: Default value of the parameter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">allowed_range</span></code>: Allowed range of the parameter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">allowed_values</span></code>: Allowed values of the parameter. Use if values are not continuous and restricted to a small list of allowed values.</p></li>
</ul>
<p>Tables of any dimensions can be described using the <code class="docutils literal notranslate"><span class="pre">data_table</span></code> field. Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">data_table</span>
<span class="w">    </span><span class="nt">table_columns</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">wavelength</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Wavelength.</span>
<span class="w">        </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">unit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nm</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">double</span>
<span class="w">        </span><span class="nt">required_range</span><span class="p">:</span>
<span class="w">          </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300.0</span>
<span class="w">          </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">700.0</span>
<span class="w">        </span><span class="nt">input_processing</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">remove_duplicates</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sort</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">photo_detection_efficiency</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Average quantum or photon detection efficiency.</span>
<span class="w">        </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">unit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dimensionless</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">double</span>
<span class="w">        </span><span class="nt">allowed_range</span><span class="p">:</span>
<span class="w">          </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">          </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
</pre></div>
</div>
<p>Input processing in form of sorting, removing of duplicates, etc. can be specified using the <code class="docutils literal notranslate"><span class="pre">input_processing</span></code> field.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code class="docutils literal notranslate"><span class="pre">data_table</span></code> field is not yet implemented in the simtools schema and parameter files.</p>
</div>
</section>
<section id="instrument-description">
<h4>Instrument description<a class="headerlink" href="#instrument-description" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">class</span></code>: Instrument class. Allow values are <em>Camera</em>, <em>Site</em>, <em>Structure</em>, <em>Telescope</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code>: Instrument type following CTAO Naming.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">site</span></code>: CTAO site. Allowed values are <em>North</em> and <em>South</em>.</p></li>
</ul>
</section>
</section>
<section id="activity-description">
<h3>Activity description<a class="headerlink" href="#activity-description" title="Link to this heading">#</a></h3>
<p>Describes setting and validation activities. Each activity corresponds to a workflow as described in the <a class="reference external" href="https://github.com/gammasim/workflows">simtools workflows repository</a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The implementation of activities and workflows is incomplete and in progress.</p>
</div>
</section>
<section id="data-source-description">
<h3>Data source description<a class="headerlink" href="#data-source-description" title="Link to this heading">#</a></h3>
<p>Describes the source of the data or parameter (e.g., <em>Calibration</em>)</p>
</section>
<section id="simulation-software-description">
<h3>Simulation software description<a class="headerlink" href="#simulation-software-description" title="Link to this heading">#</a></h3>
<p>Describes the simulation software (e.g., <em>sim_telarray</em> or <em>corsika</em>) the parameter is used for.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">simulation_software</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">corsika</span>
</pre></div>
</div>
<p>Allowed is here to add the internal simulation software parameter naming (if different than the name used here in the schema).
This is important to write correct and consistent CORSIKA or sim_telarray configuration files.</p>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">simulation_software</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sim_telarray</span>
<span class="w">    </span><span class="nt">internal_parameter_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">secondary_ref_radius</span>
</pre></div>
</div>
</section>
</section>
<section id="updating-the-model-database">
<h2>Updating the model database<a class="headerlink" href="#updating-the-model-database" title="Link to this heading">#</a></h2>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>This is for experts only and might impact the simulation model database for all users.
Tests should be done using a sandbox database before applying this to the production databases.</p>
</div>
<section id="update-a-single-model-parameter">
<h3>Update a single model parameter<a class="headerlink" href="#update-a-single-model-parameter" title="Link to this heading">#</a></h3>
<p>New model parameter defined in the simtools database format (json file) can be uploaded to the database using the <a class="reference internal" href="applications/simtools-db-add-value-from-json-to-db.html#db-add-value-from-json-to-db"><span class="std std-ref">simtools-add-value-from-json-to-db</span></a> application.
New data files can be uploaded using <a class="reference internal" href="applications/simtools-db-add-file-to-db.html#db-add-file-to-db"><span class="std std-ref">simtools-add-file-to-db</span></a>.</p>
</section>
<section id="upload-a-complete-simulation-model-from-model-repository-to-model-database">
<h3>Upload a complete simulation model from model repository to model database<a class="headerlink" href="#upload-a-complete-simulation-model-from-model-repository-to-model-database" title="Link to this heading">#</a></h3>
<p>The application <code class="docutils literal notranslate"><span class="pre">db_add_model_parameters_from_repository_to_db.py</span></code> allows to export the simulation model parameters from a
model repository to the model database for a given model version.
See the <a class="reference internal" href="databases.html#databases"><span class="std std-ref">database</span></a> section for implementation details on databases in simtools.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>simtools-add_model-parameters-from-repository-to-db<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--input_path<span class="w"> </span>/path/to/repository<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--db_name<span class="w"> </span>new_db_name
</pre></div>
</div>
<p>This application loops over all subdirectories in <code class="docutils literal notranslate"><span class="pre">input_path</span></code> and uploads all json files to the database <code class="docutils literal notranslate"><span class="pre">new_db_name</span></code> (or updates an existing database with the same name):</p>
<ul class="simple">
<li><p>subdirectories starting with <code class="docutils literal notranslate"><span class="pre">OBS</span></code> are uploaded to the <code class="docutils literal notranslate"><span class="pre">sites</span></code> collection</p></li>
<li><p>json files from the subdirectory <code class="docutils literal notranslate"><span class="pre">configuration_sim_telarray/configuration_corsika</span></code> are uploaded to the <code class="docutils literal notranslate"><span class="pre">configuration_sim_telarray/configuration_corsika</span></code> collection</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Files</span></code> are added to the <code class="docutils literal notranslate"><span class="pre">files</span></code> collection</p></li>
<li><p>all other json files are uploaded to collection defined in the array element description in <a class="reference external" href="https://github.com/gammasim/simtools/blob/main/simtools/schemas/array_elements.yml">simtools/schemas/array_elements.yml</a>. Allowed values are e.g., <code class="docutils literal notranslate"><span class="pre">telescopes</span></code>, <code class="docutils literal notranslate"><span class="pre">calibration_devices</span></code>.</p></li>
</ul>
</section>
</section>
<section id="import-simulation-model-parameters">
<h2>Import simulation model parameters<a class="headerlink" href="#import-simulation-model-parameters" title="Link to this heading">#</a></h2>
<section id="import-prod6-model-parameters">
<h3>Import Prod6 model parameters<a class="headerlink" href="#import-prod6-model-parameters" title="Link to this heading">#</a></h3>
<p>Prod6 model parameters can be extracted from <code class="docutils literal notranslate"><span class="pre">sim_telarray</span></code> using the following commands.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./sim_telarray/bin/sim_telarray<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-c<span class="w"> </span>sim_telarray/cfg/CTA/CTA-PROD6-LaPalma.cfg<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-C<span class="w"> </span><span class="nv">limits</span><span class="o">=</span>no-internal<span class="w"> </span>-C<span class="w"> </span><span class="nv">initlist</span><span class="o">=</span>no-internal<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-C<span class="w"> </span><span class="nv">list</span><span class="o">=</span>no-internal<span class="w"> </span>-C<span class="w"> </span><span class="nv">typelist</span><span class="o">=</span>no-internal<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-C<span class="w"> </span><span class="nv">maximum_telescopes</span><span class="o">=</span><span class="m">30</span><span class="w"> </span>-DNSB_AUTOSCALE<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-DNECTARCAM<span class="w"> </span>-DHYPER_LAYOUT<span class="w"> </span>-DNUM_TELESCOPES<span class="o">=</span><span class="m">30</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">|</span>/dev/null<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s1">&#39;(@cfg)&#39;</span><span class="w">  </span>&gt;<span class="p">|</span><span class="w"> </span>all_telescope_config_la_palma.cfg

./sim_telarray/bin/sim_telarray<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-c<span class="w"> </span>sim_telarray/cfg/CTA/CTA-PROD6-Paranal.cfg<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-C<span class="w"> </span><span class="nv">limits</span><span class="o">=</span>no-internal<span class="w"> </span>-C<span class="w"> </span><span class="nv">initlist</span><span class="o">=</span>no-internal<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-C<span class="w"> </span><span class="nv">list</span><span class="o">=</span>no-internal<span class="w"> </span>-C<span class="w"> </span><span class="nv">typelist</span><span class="o">=</span>no-internal<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-C<span class="w"> </span><span class="nv">maximum_telescopes</span><span class="o">=</span><span class="m">87</span><span class="w"> </span>-DNSB_AUTOSCALE<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-DNECTARCAM<span class="w"> </span>-DHYPER_LAYOUT<span class="w"> </span>-DNUM_TELESCOPES<span class="o">=</span><span class="m">87</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">|</span>/dev/null<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s1">&#39;(@cfg)&#39;</span><span class="w">  </span>&gt;<span class="p">|</span><span class="w"> </span>all_telescope_config_paranal.cfg
</pre></div>
</div>
</section>
<section id="import-prod5-model-parameters">
<h3>Import Prod5 model parameters<a class="headerlink" href="#import-prod5-model-parameters" title="Link to this heading">#</a></h3>
<p>Prod5 model parameters can be extracted from <code class="docutils literal notranslate"><span class="pre">sim_telarray</span></code> using the following commands.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./sim_telarray/bin/sim_telarray<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-c<span class="w"> </span>sim_telarray/cfg/CTA/CTA-PROD5-LaPalma.cfg<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-C<span class="w"> </span><span class="nv">limits</span><span class="o">=</span>no-internal<span class="w"> </span>-C<span class="w"> </span><span class="nv">initlist</span><span class="o">=</span>no-internal<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-C<span class="w"> </span><span class="nv">list</span><span class="o">=</span>no-internal<span class="w"> </span>-C<span class="w"> </span><span class="nv">typelist</span><span class="o">=</span>no-internal<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-C<span class="w"> </span><span class="nv">maximum_telescopes</span><span class="o">=</span><span class="m">85</span><span class="w"> </span>-DNSB_AUTOSCALE<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-DNECTARCAM<span class="w"> </span>-DHYPER_LAYOUT<span class="w"> </span>-DNUM_TELESCOPES<span class="o">=</span><span class="m">85</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">|</span>/dev/null<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s1">&#39;(@cfg)&#39;</span><span class="w">  </span>&gt;<span class="p">|</span><span class="w"> </span>all_telescope_config_la_palma_prod5.cfg

./sim_telarray/bin/sim_telarray<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-c<span class="w"> </span>sim_telarray/cfg/CTA/CTA-PROD5-Paranal.cfg<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-C<span class="w"> </span><span class="nv">limits</span><span class="o">=</span>no-internal<span class="w"> </span>-C<span class="w"> </span><span class="nv">initlist</span><span class="o">=</span>no-internal<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-C<span class="w"> </span><span class="nv">list</span><span class="o">=</span>no-internal<span class="w"> </span>-C<span class="w"> </span><span class="nv">typelist</span><span class="o">=</span>no-internal<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-C<span class="w"> </span><span class="nv">maximum_telescopes</span><span class="o">=</span><span class="m">120</span><span class="w"> </span>-DNSB_AUTOSCALE<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-DNECTARCAM<span class="w"> </span>-DHYPER_LAYOUT<span class="w"> </span>-DNUM_TELESCOPES<span class="o">=</span><span class="m">120</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">|</span>/dev/null<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s1">&#39;(@cfg)&#39;</span><span class="w">  </span>&gt;<span class="p">|</span><span class="w"> </span>all_telescope_config_paranal_prod5.cfg
</pre></div>
</div>
</section>
<section id="import-telescope-positions">
<h3>Import telescope positions<a class="headerlink" href="#import-telescope-positions" title="Link to this heading">#</a></h3>
<p>Positions of array elements like telescopes are provided by CTAO in form of tables (typically ecsv files).
To import these positions into the model parameter repository, see the following example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>simtools-write-array-element-positions-to-repository<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--input<span class="w"> </span>/path/to/positions.txt<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--repository_path<span class="w"> </span>/path/to/repository<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--model_version<span class="w"> </span><span class="m">1</span>.0.0<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--coordinate_system<span class="w"> </span>ground<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--site<span class="w"> </span>North
</pre></div>
</div>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="auxiliary_files.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Auxiliary Files</p>
      </div>
    </a>
    <a class="right-next"
       href="databases.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Databases</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#description-of-model-parameters-through-schemas">Description of model parameters through schemas</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#valid-keys">Valid Keys</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#header-section">Header section</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#parameter-description">Parameter description</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#parameter-data">Parameter data</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument-description">Instrument description</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#activity-description">Activity description</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-source-description">Data source description</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#simulation-software-description">Simulation software description</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#updating-the-model-database">Updating the model database</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#update-a-single-model-parameter">Update a single model parameter</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upload-a-complete-simulation-model-from-model-repository-to-model-database">Upload a complete simulation model from model repository to model database</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#import-simulation-model-parameters">Import simulation model parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#import-prod6-model-parameters">Import Prod6 model parameters</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#import-prod5-model-parameters">Import Prod5 model parameters</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#import-telescope-positions">Import telescope positions</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/user-guide/model_parameters.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
       Copyright 2024, gammasim-tools, simtools developers.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>