
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Simulation Model &#8212; simtools v0.1.dev1+g5674210 Manual</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=384b581d" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="_static/documentation_options.js?v=25d88637"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'model_parameters';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Databases" href="databases.html" />
    <link rel="prev" title="Auxiliary Files" href="auxiliary_files.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>


  <div class="bd-header-announcement container-fluid bd-header-announcement">
    <div class="bd-header-announcement__content">simtools is under rapid development with continuous changes. Please contact the developers before using it.</div>
  </div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
  
    <p class="title logo__title">simtools v0.1.dev1+g5674210 Manual</p>
  
</a></div>
        <div class="sidebar-primary-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/gammasim/simtools" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/gammasimtools/" title="PyPI" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="https://badge.fury.io/py/gammasimtools.svg" class="icon-link-image" alt="PyPI"/></a>
        </li>
</ul></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="index.html">
                    simtools
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="simtools-configuration.html">Configuration</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="applications.html">simtools Applications</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="add_file_to_db.html">add_file_to_db</a></li>
<li class="toctree-l2"><a class="reference internal" href="add_value_from_json_to_db.html">add_value_from_json_to_db</a></li>
<li class="toctree-l2"><a class="reference internal" href="calculate_trigger_rate.html">calculate_trigger_rate</a></li>
<li class="toctree-l2"><a class="reference internal" href="compare_cumulative_psf.html">compare_cumulative_psf</a></li>
<li class="toctree-l2"><a class="reference internal" href="convert_all_model_parameters_from_simtel.html">convert_all_model_parameters_from_simtel</a></li>
<li class="toctree-l2"><a class="reference internal" href="convert_model_parameter_from_simtel.html">convert_model_parameter_from_simtel</a></li>
<li class="toctree-l2"><a class="reference internal" href="derive_mirror_rnda.html">derive_mirror_rnda</a></li>
<li class="toctree-l2"><a class="reference internal" href="generate_corsika_histograms.html">generate_corsika_histograms</a></li>
<li class="toctree-l2"><a class="reference internal" href="generate_default_metadata.html">generate_default_metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="generate_simtel_array_histograms.html">generate_simtel_array_histograms</a></li>
<li class="toctree-l2"><a class="reference internal" href="get_file_from_db.html">get_file_from_db</a></li>
<li class="toctree-l2"><a class="reference internal" href="get_parameter.html">get_parameter</a></li>
<li class="toctree-l2"><a class="reference internal" href="light_emission.html">light_emission</a></li>
<li class="toctree-l2"><a class="reference internal" href="make_regular_arrays.html">make_regular_arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="plot_array_layout.html">plot_array_layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="print_array_elements.html">print_array_elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="produce_array_config.html">produce_array_config</a></li>
<li class="toctree-l2"><a class="reference internal" href="sim_showers_for_trigger_rates.html">sim_showers_for_trigger_rates</a></li>
<li class="toctree-l2"><a class="reference internal" href="simulate_prod.html">simulate_prod</a></li>
<li class="toctree-l2"><a class="reference internal" href="submit_data_from_external.html">submit_data_from_external</a></li>
<li class="toctree-l2"><a class="reference internal" href="tune_psf.html">tune_psf</a></li>
<li class="toctree-l2"><a class="reference internal" href="validate_camera_efficiency.html">validate_camera_efficiency</a></li>
<li class="toctree-l2"><a class="reference internal" href="validate_camera_fov.html">validate_camera_fov</a></li>
<li class="toctree-l2"><a class="reference internal" href="validate_file_using_schema.html">validate_file_using_schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="validate_optics.html">validate_optics</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="library.html">API</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="camera_efficiency.html">Camera Efficiency</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration_module.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="corsika.html">CORSIKA</a></li>
<li class="toctree-l2"><a class="reference internal" href="corsika_simtel.html">CORSIKA and sim_telarray</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_model.html">Data Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="db_handler.html">Database support</a></li>
<li class="toctree-l2"><a class="reference internal" href="io_operations.html">I/O</a></li>
<li class="toctree-l2"><a class="reference internal" href="job_execution.html">Job execution and submission</a></li>
<li class="toctree-l2"><a class="reference internal" href="array_layout.html">Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="mc_model.html">MC Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="psf_analysis.html">PSF Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="ray_tracing.html">Ray Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="sim_telarray.html">sim_telarray</a></li>
<li class="toctree-l2"><a class="reference internal" href="simulators.html">Simulator</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="visualization.html">Visualization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="auxiliary_files.html">Auxiliary Files</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Simulation Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="databases.html">Databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="simulation_software.html">Simulation Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker_files.html">Containers (docker files)</a></li>
<li class="toctree-l1"><a class="reference internal" href="documentation.html">Generating Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_guidelines.html">Developer Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="pull_requests.html">Pull requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="coding_guidelines.html">Coding Guidelines</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/gammasim/simtools/blob/main/docs/model_parameters.md?plain=1" target="_blank"
   class="btn btn-sm btn-source-file-button dropdown-item"
   title="Show source"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-code"></i>
  </span>
<span class="btn__text-container">Show source</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/gammasim/simtools/issues/new?title=Issue%20on%20page%20%2Fmodel_parameters.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/model_parameters.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Simulation Model</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#description-of-model-parameters">Description of model parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example">Example</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#valid-keys">Valid Keys</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#header-section">Header section</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#parameter-description">Parameter description</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#parameter-data">Parameter data</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument-description">Instrument description</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#activity-description">Activity description</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-source-description">Data source description</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#simulation-software-description">Simulation software description</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-structure-for-model-parameters">Data structure for model parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#updating-the-model-database">Updating the model database</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#update-a-single-model-parameter">Update a single model parameter</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upload-a-complete-simulation-model-from-model-repository-to-model-database">Upload a complete simulation model from model repository to model database</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#import-simulation-model-parameters">Import simulation model parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#import-prod6-model-parameters">Import Prod6 model parameters</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#import-prod5-model-parameters">Import Prod5 model parameters</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#import-telescope-positions">Import telescope positions</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="simulation-model">
<h1>Simulation Model<a class="headerlink" href="#simulation-model" title="Link to this heading">#</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">#</a></h2>
<p>Simulation model parameters describe properties of all relevant elements of the observatory including site,
telescopes, and calibration devices.
The management, definition, derivation, verification, and validation of the simulation model is central to the functionality of simtools.
Model parameters are centrally stored (in a database and repository) and described and defined by <a class="reference external" href="https://github.com/gammasim/simtools/tree/main/simtools/schemas/model_parameters">schema files</a>.</p>
<p>Examples for model parameters are those describing atmospheric model (profile, transmission) or geomagnetic field characteristics for the site,
descriptions of optical and mechanical properties of the telescope, and detector plan, trigger, and readout settings for the cameras (see <a class="reference external" href="https://github.com/gammasim/simtools/tree/main/simtools/schemas/model_parameters">model parameter schema files</a> for all model parameters.)</p>
<p>For simplicity, the term parameter is used for values, (multi-dimensional) vectors of values
(e.g., the mirror reflectivity vs wavelength and photon incident angle), functions, and algorithms
(e.g., the telescope trigger algorithm).
Parameters might be fixed in time (e.g., the number of mirrors on a certain telescope), or variable
on different time scales (e.g., compare the degradation of the mirror reflectivity over several months
with the nightly variability of the atmospheric parameters).</p>
<p>The major components to handle the simulation model in simtools are:</p>
<ol class="arabic simple">
<li><p><strong>Model parameter databases:</strong> The simulation model is stored in <a class="reference internal" href="databases.html#databases"><span class="std std-ref">mongoDB databases</span></a>.
The <a class="reference internal" href="db_handler.html#dbhandler"><span class="std std-ref">db_handler module</span></a> provides reading and writing interfaces to the database.</p></li>
<li><p><strong>Model parameter management:</strong> The <a class="reference internal" href="#mcmodel.md#model-parameters"><span class="xref myst">model parameters module</span></a> provides interfaces to manage the simulation model parameters.</p></li>
<li><p>A <strong>model of an array and its elements</strong> consists of the <a class="reference internal" href="#mcmodel.md#site-model"><span class="xref myst">SiteModel</span></a> and several <a class="reference internal" href="#mcmodel.md#telescope-model"><span class="xref myst">TelescopeModel</span></a>`and <a class="reference internal" href="#mcmodel.md#calibration-model"><span class="xref myst">CalibrationModel</span></a> instances.</p></li>
</ol>
<p>Simtools includes applications to write new model parameters to the databases and the export or import model parameters from sim_telarray configuration files (see following sections).</p>
<p>Review and revision control of the simulation models uses the <a class="reference external" href="https://gitlab.cta-observatory.org/cta-science/simulations/simulation-model/model_parameters/-/blob/main/README.md?ref_type=heads">model parameters gitlab repository</a>. Simtools provides applications to read, write, and update the databases from this repository.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The simulation model is a central part of the CTAO Simulation Pipeline. The responsibility for the values and the correctness of the simulation model parameters is with the CTAO Simulation Team.</p>
</div>
</section>
<section id="description-of-model-parameters">
<h2>Description of model parameters<a class="headerlink" href="#description-of-model-parameters" title="Link to this heading">#</a></h2>
<p>Schema files define all simulation model parameters are part of <a class="reference external" href="https://github.com/gammasim/simtools">simtools</a> and can be found in <a class="reference external" href="https://github.com/gammasim/simtools/tree/main/simtools/schemas/model_parameters">simtools/schemas/model_parameters</a>.</p>
<p>These files describe the simulation model parameters including (among others fields) name, type, format, units, applicable telescopes, and parameter description.
They include information about setting and validation activities, data sources, and simulation software.
The schema files and especially the model parameter descriptions are derived from (and planned to be synchronized with) the <a class="reference external" href="https://www.mpi-hd.mpg.de/hfm/~bernlohr/sim_telarray/">sim_telarray manual</a>.</p>
<p>The schema files are in human readable yaml format and follow a fixed meta metaschema (see <a class="reference external" href="https://github.com/gammasim/simtools/blob/main/simtools/schemas/model_parameter_and_data_schema.metaschema.yml">model_parameter_and_data_schema.metaschema.yml</a>; found in simtools schema directory).</p>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Link to this heading">#</a></h3>
<p>The following example is for a single parameter description.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">%YAML</span><span class="w"> </span><span class="m">1.2</span>
<span class="nn">---</span>
<span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Schema for num_gains model parameter</span>
<span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1.0</span>
<span class="nt">meta_schema</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">simpipe-schema</span>
<span class="nt">meta_schema_url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://raw.githubusercontent.com/gammasim/simtools/main/simtools/schemas/model_parameter_and_data_schema.metaschema.yml</span>
<span class="nt">meta_schema_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1.0</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">num_gains</span>
<span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Number of different gains the input signal gets digitized.</span>
<span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">int</span>
<span class="w">    </span><span class="nt">unit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dimensionless</span>
<span class="w">    </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">allowed_range</span><span class="p">:</span>
<span class="w">      </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">      </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="nt">instrument</span><span class="p">:</span>
<span class="w">  </span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Camera</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LSTN</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LSTS</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MSTN</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MSTS</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SSTS</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SCTS</span>
<span class="nt">activity</span><span class="p">:</span>
<span class="w">  </span><span class="nt">setting</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SetParameterFromExternal</span>
<span class="w">  </span><span class="nt">validation</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ValidateParameterByExpert</span>
<span class="nt">source</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Initial instrument setup</span>
<span class="nt">simulation_software</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sim_telarray</span>
</pre></div>
</div>
</section>
<section id="valid-keys">
<h3>Valid Keys<a class="headerlink" href="#valid-keys" title="Link to this heading">#</a></h3>
<p>Valid keys are described in detail in <a class="reference external" href="https://github.com/gammasim/simtools/blob/main/simtools/schemas/model_parameter_and_data_schema.metaschema.yml">model_parameter_and_data_schema.metaschema.yml</a>. The most important parameters are:</p>
<section id="header-section">
<h4>Header section<a class="headerlink" href="#header-section" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">title</span></code>: Title of the schema file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">version</span></code>: Version of this schema file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">meta_schema</span></code>: Name of the base schema.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">meta_schema_url</span></code>: URL of the base schema.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">meta_schema_version</span></code>: Version of the base schema.</p></li>
</ul>
</section>
<section id="parameter-description">
<h4>Parameter description<a class="headerlink" href="#parameter-description" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: Name of the parameter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">description</span></code>: Description of the parameter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">short_description</span></code>: Short description of the parameter (optional).</p></li>
</ul>
</section>
<section id="parameter-data">
<h4>Parameter data<a class="headerlink" href="#parameter-data" title="Link to this heading">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">data</span></code> field is used to describe the actual type, format, and allowed values of the parameter.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code>: Data type of the parameter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unit</span></code>: Units of the parameter (compatible with astropy units).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">default</span></code>: Default value of the parameter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">allowed_range</span></code>: Allowed range of the parameter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">allowed_values</span></code>: Allowed values of the parameter. Use if values are not continuous and restricted to a small list of allowed values.</p></li>
</ul>
<p>Tables of any dimensions can be described using the <code class="docutils literal notranslate"><span class="pre">data_table</span></code> field. Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">data_table</span>
<span class="w">    </span><span class="nt">table_columns</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">wavelength</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Wavelength.</span>
<span class="w">        </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">unit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nm</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">double</span>
<span class="w">        </span><span class="nt">required_range</span><span class="p">:</span>
<span class="w">          </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300.0</span>
<span class="w">          </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">700.0</span>
<span class="w">        </span><span class="nt">input_processing</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">remove_duplicates</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sort</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">photo_detection_efficiency</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Average quantum or photon detection efficiency.</span>
<span class="w">        </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">unit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dimensionless</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">double</span>
<span class="w">        </span><span class="nt">allowed_range</span><span class="p">:</span>
<span class="w">          </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">          </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
</pre></div>
</div>
<p>Input processing in form of sorting, removing of duplicates, etc. can be specified using the <code class="docutils literal notranslate"><span class="pre">input_processing</span></code> field.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code class="docutils literal notranslate"><span class="pre">data_table</span></code> field is not yet implemented in the simtools schema and parameter files.</p>
</div>
</section>
<section id="instrument-description">
<h4>Instrument description<a class="headerlink" href="#instrument-description" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">class</span></code>: Instrument class. Allow values are <em>Camera</em>, <em>Site</em>, <em>Structure</em>, <em>Telescope</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code>: Instrument type following CTAO Naming.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">site</span></code>: CTAO site. Allowed values are <em>North</em> and <em>South</em>.</p></li>
</ul>
</section>
</section>
<section id="activity-description">
<h3>Activity description<a class="headerlink" href="#activity-description" title="Link to this heading">#</a></h3>
<p>Describes setting and validation activities. Each activity corresponds to a workflow as described in the <a class="reference external" href="https://github.com/gammasim/workflows">simtools workflows repository</a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The implementation of activities and workflows is incomplete and in progress.</p>
</div>
</section>
<section id="data-source-description">
<h3>Data source description<a class="headerlink" href="#data-source-description" title="Link to this heading">#</a></h3>
<p>Describes the source of the data or parameter (e.g., <em>Calibration</em>)</p>
</section>
<section id="simulation-software-description">
<h3>Simulation software description<a class="headerlink" href="#simulation-software-description" title="Link to this heading">#</a></h3>
<p>Describes the simulation software (e.g., <em>sim_telarray</em> or <em>corsika</em>) the parameter is used for.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">simulation_software</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">corsika</span>
</pre></div>
</div>
<p>Allowed is here to add the internal simulation software parameter naming (if different than the name used here in the schema).
This is important to write correct and consistent CORSIKA or sim_telarray configuration files.</p>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">simulation_software</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sim_telarray</span>
<span class="w">    </span><span class="nt">internal_parameter_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">secondary_ref_radius</span>
</pre></div>
</div>
</section>
</section>
<section id="data-structure-for-model-parameters">
<h2>Data structure for model parameters<a class="headerlink" href="#data-structure-for-model-parameters" title="Link to this heading">#</a></h2>
<p>The model parameters are stored in json-style in the <a class="reference external" href="https://gitlab.cta-observatory.org/cta-science/simulations/simulation-model/model_parameters">model repository</a> and database.
A typical model parameter file looks like:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;parameter&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;num_gains&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;instrument&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LSTN-01&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;site&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;North&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-02-01&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;unit&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;int64&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;applicable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;file&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="updating-the-model-database">
<h2>Updating the model database<a class="headerlink" href="#updating-the-model-database" title="Link to this heading">#</a></h2>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>This is for experts only and might impact the simulation model database for all users.
Tests should be done using a sandbox database before applying this to the production databases.</p>
</div>
<section id="update-a-single-model-parameter">
<h3>Update a single model parameter<a class="headerlink" href="#update-a-single-model-parameter" title="Link to this heading">#</a></h3>
<p>New model parameter defined in the simtools database format (json file) can be uploaded to the database using the <a class="reference internal" href="add_value_from_json_to_db.html#add-value-from-json-to-db"><span class="std std-ref">simtools-add-value-from-json-to-db</span></a> application.
New data files can be uploaded using <a class="reference internal" href="add_file_to_db.html#add-file-to-db"><span class="std std-ref">simtools-add-file-to-db</span></a>.</p>
</section>
<section id="upload-a-complete-simulation-model-from-model-repository-to-model-database">
<h3>Upload a complete simulation model from model repository to model database<a class="headerlink" href="#upload-a-complete-simulation-model-from-model-repository-to-model-database" title="Link to this heading">#</a></h3>
<p>The application <code class="docutils literal notranslate"><span class="pre">add_model_parameters_from_repository_to_db.py</span></code> allows to export the simulation model parameters from a
model repository to the model database for a given model version.
See the <a class="reference internal" href="databases.html#databases"><span class="std std-ref">database</span></a> section for implementation details on databases in simtools.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>simtools-add_model-parameters-from-repository-to-db<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--input_path<span class="w"> </span>/path/to/repository<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--db_name<span class="w"> </span>new_db_name
</pre></div>
</div>
<p>This application loops over all subdirectories in <code class="docutils literal notranslate"><span class="pre">input_path</span></code> and uploads all json files to the database <code class="docutils literal notranslate"><span class="pre">new_db_name</span></code> (or updates an existing database with the same name):</p>
<ul class="simple">
<li><p>subdirectories starting with <code class="docutils literal notranslate"><span class="pre">OBS</span></code> are uploaded to the <code class="docutils literal notranslate"><span class="pre">sites</span></code> collection</p></li>
<li><p>json files from the subdirectory <code class="docutils literal notranslate"><span class="pre">configuration_sim_telarray</span></code> are uploaded to the <code class="docutils literal notranslate"><span class="pre">configuration_sim_telarray</span></code> collection</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Files</span></code> are added to the <code class="docutils literal notranslate"><span class="pre">files</span></code> collection</p></li>
<li><p>all other json files are uploaded to collection defined in the array element description in <a class="reference external" href="https://github.com/gammasim/simtools/blob/main/simtools/schemas/array_elements.yml">simtools/schemas/array_elements.yml</a>. Allowed values are e.g., <code class="docutils literal notranslate"><span class="pre">telescopes</span></code>, <code class="docutils literal notranslate"><span class="pre">calibration_devices</span></code>.</p></li>
</ul>
</section>
</section>
<section id="import-simulation-model-parameters">
<h2>Import simulation model parameters<a class="headerlink" href="#import-simulation-model-parameters" title="Link to this heading">#</a></h2>
<section id="import-prod6-model-parameters">
<h3>Import Prod6 model parameters<a class="headerlink" href="#import-prod6-model-parameters" title="Link to this heading">#</a></h3>
<p>Prod6 model parameters can be extracted from <code class="docutils literal notranslate"><span class="pre">sim_telarray</span></code> using the following commands.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./sim_telarray/bin/sim_telarray<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-c<span class="w"> </span>sim_telarray/cfg/CTA/CTA-PROD6-LaPalma.cfg<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-C<span class="w"> </span><span class="nv">limits</span><span class="o">=</span>no-internal<span class="w"> </span>-C<span class="w"> </span><span class="nv">initlist</span><span class="o">=</span>no-internal<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-C<span class="w"> </span><span class="nv">list</span><span class="o">=</span>no-internal<span class="w"> </span>-C<span class="w"> </span><span class="nv">typelist</span><span class="o">=</span>no-internal<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-C<span class="w"> </span><span class="nv">maximum_telescopes</span><span class="o">=</span><span class="m">30</span><span class="w"> </span>-DNSB_AUTOSCALE<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-DNECTARCAM<span class="w"> </span>-DHYPER_LAYOUT<span class="w"> </span>-DNUM_TELESCOPES<span class="o">=</span><span class="m">30</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">|</span>/dev/null<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s1">&#39;(@cfg)&#39;</span><span class="w">  </span>&gt;<span class="p">|</span><span class="w"> </span>all_telescope_config_la_palma.cfg

./sim_telarray/bin/sim_telarray<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-c<span class="w"> </span>sim_telarray/cfg/CTA/CTA-PROD6-Paranal.cfg<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-C<span class="w"> </span><span class="nv">limits</span><span class="o">=</span>no-internal<span class="w"> </span>-C<span class="w"> </span><span class="nv">initlist</span><span class="o">=</span>no-internal<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-C<span class="w"> </span><span class="nv">list</span><span class="o">=</span>no-internal<span class="w"> </span>-C<span class="w"> </span><span class="nv">typelist</span><span class="o">=</span>no-internal<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-C<span class="w"> </span><span class="nv">maximum_telescopes</span><span class="o">=</span><span class="m">87</span><span class="w"> </span>-DNSB_AUTOSCALE<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-DNECTARCAM<span class="w"> </span>-DHYPER_LAYOUT<span class="w"> </span>-DNUM_TELESCOPES<span class="o">=</span><span class="m">87</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">|</span>/dev/null<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s1">&#39;(@cfg)&#39;</span><span class="w">  </span>&gt;<span class="p">|</span><span class="w"> </span>all_telescope_config_paranal.cfg
</pre></div>
</div>
</section>
<section id="import-prod5-model-parameters">
<h3>Import Prod5 model parameters<a class="headerlink" href="#import-prod5-model-parameters" title="Link to this heading">#</a></h3>
<p>Prod5 model parameters can be extracted from <code class="docutils literal notranslate"><span class="pre">sim_telarray</span></code> using the following commands.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./sim_telarray/bin/sim_telarray<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-c<span class="w"> </span>sim_telarray/cfg/CTA/CTA-PROD5-LaPalma.cfg<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-C<span class="w"> </span><span class="nv">limits</span><span class="o">=</span>no-internal<span class="w"> </span>-C<span class="w"> </span><span class="nv">initlist</span><span class="o">=</span>no-internal<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-C<span class="w"> </span><span class="nv">list</span><span class="o">=</span>no-internal<span class="w"> </span>-C<span class="w"> </span><span class="nv">typelist</span><span class="o">=</span>no-internal<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-C<span class="w"> </span><span class="nv">maximum_telescopes</span><span class="o">=</span><span class="m">85</span><span class="w"> </span>-DNSB_AUTOSCALE<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-DNECTARCAM<span class="w"> </span>-DHYPER_LAYOUT<span class="w"> </span>-DNUM_TELESCOPES<span class="o">=</span><span class="m">85</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">|</span>/dev/null<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s1">&#39;(@cfg)&#39;</span><span class="w">  </span>&gt;<span class="p">|</span><span class="w"> </span>all_telescope_config_la_palma_prod5.cfg

./sim_telarray/bin/sim_telarray<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-c<span class="w"> </span>sim_telarray/cfg/CTA/CTA-PROD5-Paranal.cfg<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-C<span class="w"> </span><span class="nv">limits</span><span class="o">=</span>no-internal<span class="w"> </span>-C<span class="w"> </span><span class="nv">initlist</span><span class="o">=</span>no-internal<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-C<span class="w"> </span><span class="nv">list</span><span class="o">=</span>no-internal<span class="w"> </span>-C<span class="w"> </span><span class="nv">typelist</span><span class="o">=</span>no-internal<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-C<span class="w"> </span><span class="nv">maximum_telescopes</span><span class="o">=</span><span class="m">120</span><span class="w"> </span>-DNSB_AUTOSCALE<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-DNECTARCAM<span class="w"> </span>-DHYPER_LAYOUT<span class="w"> </span>-DNUM_TELESCOPES<span class="o">=</span><span class="m">120</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">|</span>/dev/null<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s1">&#39;(@cfg)&#39;</span><span class="w">  </span>&gt;<span class="p">|</span><span class="w"> </span>all_telescope_config_paranal_prod5.cfg
</pre></div>
</div>
</section>
<section id="import-telescope-positions">
<h3>Import telescope positions<a class="headerlink" href="#import-telescope-positions" title="Link to this heading">#</a></h3>
<p>Positions of array elements like telescopes are provided by CTAO in form of tables (typically ecsv files).
To import these positions into the model parameter repository, see the following example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>simtools-write-array-element-positions-to-repository<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--input<span class="w"> </span>/path/to/positions.txt<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--repository_path<span class="w"> </span>/path/to/repository<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--model_version<span class="w"> </span><span class="m">1</span>.0.0<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--coordinate_system<span class="w"> </span>ground<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--site<span class="w"> </span>North
</pre></div>
</div>
</section>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="auxiliary_files.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Auxiliary Files</p>
      </div>
    </a>
    <a class="right-next"
       href="databases.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Databases</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#description-of-model-parameters">Description of model parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example">Example</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#valid-keys">Valid Keys</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#header-section">Header section</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#parameter-description">Parameter description</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#parameter-data">Parameter data</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument-description">Instrument description</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#activity-description">Activity description</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-source-description">Data source description</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#simulation-software-description">Simulation software description</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-structure-for-model-parameters">Data structure for model parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#updating-the-model-database">Updating the model database</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#update-a-single-model-parameter">Update a single model parameter</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upload-a-complete-simulation-model-from-model-repository-to-model-database">Upload a complete simulation model from model repository to model database</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#import-simulation-model-parameters">Import simulation model parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#import-prod6-model-parameters">Import Prod6 model parameters</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#import-prod5-model-parameters">Import Prod5 model parameters</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#import-telescope-positions">Import telescope positions</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Raul Prado (DESY), Orel Gueta (DESY), Tobias Kleiner (DESY), Victor Barbosa Martins (DESY), Gernot Maier (DESY)
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
       Copyright 2024, gammasim-tools, simtools developers.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>